<launch>

    <include file="$(find armmu)/launch/display.launch">
        <arg name="use_rviz" value="false" />
        <arg name="use_joint_state_publisher" value="false" />
    </include>

    <!-- 先启动 MoveIt（加载 robot_description + move_group + joint_moveit_ctrl_server，无 RViz） -->
    <include file="$(find piper_with_gripper_moveit)/launch/demo.launch">
        <arg name="use_rviz" value="false" />
    </include>

    <!-- 手眼标定节点 -->
    <node name="handeye_transform_node" pkg="eyes2hand" type="handeye_transform_node.py" output="screen" />

    <!-- 加载示教角度配置文件 -->
    <rosparam command="load" file="$(find arm_control_node)/config/teach_angles.yaml" />
    <rosparam command="load" file="$(find arm_control_node)/config/tree_positions.yaml" />
    
    <!-- 加载剪刀配置参数 -->
    <rosparam command="load" file="$(find arm_control_node)/config/scissor_config.yaml" />

    <!-- 启动机械臂控制节点 -->
    <node name="arm_control_node" pkg="arm_control_node" type="arm_control_node" output="screen">
        <!-- 位置容差参数 -->
        <param name="position_tolerance" value="0.5" />
        
        <!-- 角度容差参数 -->
        <param name="orientation_tolerance" value="0.3" />
        
        <!-- 最佳操作距离 -->
        <param name="optimal_distance" value="1.0" />
        
        <!-- 果篮最大容量 -->
        <param name="max_basket_count" value="8" />
        
        <!-- 存储区位置参数 -->
        <param name="storage_pose_x" value="5.0" />
        <param name="storage_pose_y" value="0.0" />
        <param name="storage_pose_yaw" value="0.0" />
    </node>
    
</launch> 